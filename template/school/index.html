<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>School ERP Login</title>

        <script src="https://unpkg.com/htmx.org@1.9.3"></script>
        <script src="https://cdn.tailwindcss.com"></script>

        <style>
            /* Smooth animation for OTP box */
            .fade-slide-in {
                opacity: 0;
                transform: translateY(20px);
                animation: fadeSlideIn 0.4s ease-out forwards;
            }
            @keyframes fadeSlideIn {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>

    <body class="h-screen flex font-sans bg-gray-100">
        <!-- LEFT SECTION -->
        <div
            class="hidden md:flex w-1/2 relative bg-cover bg-center"
            style="
                background-image: url(&quot;https://images.unsplash.com/photo-1581091870621-3c2128fa81a4?auto=format&fit=crop&w=1470&q=80&quot;);
            "
        >
            <div
                class="absolute inset-0 bg-gradient-to-tr from-indigo-900 via-purple-900 to-pink-800 opacity-80 flex flex-col justify-center items-center p-10 text-center"
            >
                <h1 class="text-white text-5xl font-bold drop-shadow-lg">
                    Welcome to <span class="text-yellow-400">School ERP</span>
                </h1>
                <p class="text-gray-200 text-lg mt-4 max-w-md drop-shadow">
                    Manage students, teachers, classes, attendance, and
                    analytics effortlessly.
                </p>
            </div>
        </div>

        <!-- RIGHT SECTION -->
        <div class="w-full md:w-1/2 flex items-center justify-center p-12">
            <div
                class="w-full max-w-md bg-white rounded-3xl shadow-2xl p-10 border border-gray-200"
            >
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">
                    Sign in to your account
                </h2>

                <!-- STEP 1: Email / Phone -->
                <form id="login-form" class="space-y-6">
                    <div id="step-1-form">
                        <label class="block text-gray-700 font-medium mb-2"
                            >Email or Phone</label
                        >
                        <input
                            type="text"
                            id="identifier"
                            placeholder="you@example.com / 9876543210"
                            required
                            class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500"
                        />

                        <button
                            type="submit"
                            class="w-full bg-indigo-600 mt-6 text-white py-3 rounded-xl font-semibold hover:bg-indigo-700 transition shadow-lg"
                        >
                            Send OTP
                        </button>
                    </div>
                </form>

                <!-- STEP 2: OTP -->
                <div id="otp-section" class="mt-6"></div>

                <p class="mt-10 text-gray-500 text-center">
                    Â© 2025 School ERP
                </p>
            </div>
        </div>

        <!-- ===================== JS ===================== -->
        <script>
            // DEMO MODE (Set to false for real backend)
            const DEMO_MODE = true;
            const DEMO_OTP = "1234";

            const formStep1 = document.querySelector("#step-1-form");
            const otpSection = document.querySelector("#otp-section");

            // Intercept Submit (DEMO ONLY)
            document
                .querySelector("#login-form")
                .addEventListener("submit", function (e) {
                    if (DEMO_MODE) {
                        e.preventDefault();

                        // simulate API delay
                        setTimeout(() => {
                            showOtpForm();
                        }, 500);
                    }
                });

            function showOtpForm() {
                formStep1.classList.add("hidden");

                otpSection.innerHTML = `
                <div class="fade-slide-in space-y-4 p-4 bg-white border rounded-xl shadow">
                    <p class="text-green-600 font-medium">
                        OTP sent successfully! (Demo OTP: <b>${DEMO_OTP}</b>)
                    </p>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Enter OTP</label>
                        <input type="text"
                               id="otp-input"
                               maxlength="4"
                               placeholder="1234"
                               class="w-full px-5 py-3 rounded-xl border border-gray-300
                                      focus:ring-2 focus:ring-indigo-500" />
                    </div>

                    <button onclick="verifyOtp()"
                            class="w-full bg-green-600 text-white py-3 rounded-xl font-semibold
                                   hover:bg-green-700 transition shadow-lg">
                        Verify OTP
                    </button>

                    <p id="otp-error" class="text-red-600 font-medium text-center"></p>
                </div>`;
            }

            function verifyOtp() {
                const otp = document.querySelector("#otp-input").value;
                const errorEl = document.querySelector("#otp-error");

                if (otp === DEMO_OTP) {
                    errorEl.textContent = "";

                    otpSection.innerHTML = `
                    <div class="fade-slide-in text-center p-4">
                        <p class="text-green-700 text-xl font-semibold">Login Successful ðŸŽ‰</p>
                        <p class="text-gray-600 mt-2">Redirecting...</p>
                    </div>`;

                    setTimeout(() => {
                        window.location.href = "/dashboard.html"; // simulate redirect
                    }, 1200);
                } else {
                    errorEl.textContent = "Invalid OTP. Please try again.";
                }
            }
        </script>
    </body>
</html>
